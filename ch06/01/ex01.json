{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "Create an RDS Instance of MySQL Engine",
	"Parameters": {
		"VPC": {
			"Description": "VPC Id",
			"Type": "AWS::EC2::VPC::Id"
		}		       
	},
	"Resources": {
		"DatabaseSecurityGroup": {
			"Type": "AWS::EC2::SecurityGroup",
			"Properties": {
				"GroupDescription": "Security Group of myapp's Database",
				"VpcId": {"Ref": "VPC"},
				"SecurityGroupIngress": [{
					"CidrIp": "0.0.0.0/0",
					"IpProtocol": "tcp",
					"FromPort": "3306",
					"ToPort": "3306"
				}]
			}
		},		 		
		"Database": {
			"Type": "AWS::RDS::DBInstance",
			"DeletionPolicy": "Delete",
			"Properties": {
				"AllocatedStorage": "5",
				"DBInstanceClass": "db.t2.micro",
				"DBInstanceIdentifier": "myapp-db",
				"DBName": "myapp",
				"Engine": "MySQL",
				"MasterUsername": "myapp",
				"MasterUserPassword": "myapp1234",
				"VPCSecurityGroups": [{"Fn::GetAtt": ["DatabaseSecurityGroup", "GroupId"]}]
			}
		}
	},
	"Outputs": {
		"Endpoint": {
			"Description": "the Endpoint of RDS instance created",
			"Value": {
				"Fn::GetAtt": ["Database", "Endpoint.Address"]
			}
		}
	}
}